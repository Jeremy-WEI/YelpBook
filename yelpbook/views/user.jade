extends layout

block content
  h1= user_name
  p Welcome to #{user_name}
  h2(style='color:red') #{message}


  form(enctype='multipart/form-data', action='/users/new_post', method='POST')
    .form-group
      .row
        .col-md-6
          input#new_post.form-control(name='new_post', placeholder='New Post', type='textarea', rows='10', cols='50')
        .col-md-4
          dl.dropdown
            dt
              a(href='#')
                span.hida Select
                p.multiSel
            dd
              .mutliSelect
                ul
                  each friend in friends
                    li
                      input(name='friend', type='checkbox', value=friend.user_id)
                      =friend.fb_name
      .row
        .col-md-4
          input(type='submit', value='Post')
      .row
        .col-md-8
          input(type='file', name='photo', accept="image/*")
  h1 News Feeds From Friends
  .row
    .col-md-8
      section.content-wrapper
        .content-box
          for post in results
            .row
              .col-md-8
                p
                  a(href='/homepage/#{post.user_id}') user name: #{post.user_name}
            .row
              .col-md-8
                if (Object.keys(post.friend_list).length != 0)
                  p with friend&nbsp
                    for friend in post.friend_list
                      a(href='/homepage/#{friend[0]}') #{friend[1]}
                      &nbsp

            .row
              .col-md-8
                p #{post.text}
            .row
              .col-md-8
                if post.photo_name != 'NULL'
                  img(src='/users/images/#{post.photo_name}', alt='Photo missing')
            .row
              .col-md-8
                p Posted on: #{post.datetime}


  script.
    $(".dropdown dt a").on('click', function () {
          $(".dropdown dd ul").slideToggle('fast');
      });
          $(".dropdown dd ul li a").on('click', function () {
          $(".dropdown dd ul").hide();
      });
          function getSelectedValue(id) {
           return $("#" + id).find("dt a span.value").html();
      }
          $(document).bind('click', function (e) {
          var $clicked = $(e.target);
          if (!$clicked.parents().hasClass("dropdown")) $(".dropdown dd ul").hide();
      });
              $('.mutliSelect input[type="checkbox"]').on('click', function () {
              var title = $(this).closest('.mutliSelect').find('input[type="checkbox"]').val();
              console.log(title);
              title = $(this).val() + ",";
              if ($(this).is(':checked')) {
              var html = '<span title="' + title + '">' + title + '</span>';
              $('.multiSel').append(html);
              $(".hida").hide();
          }
          else {
              $('span[title="' + title + '"]').remove();
              var ret = $(".hida");
              $('.dropdown dt a').append(ret);
              }
      });
j
